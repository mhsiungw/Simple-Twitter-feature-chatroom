(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0d4b0345"],{"54d0":function(t,s,n){"use strict";n("a875")},7696:function(t,s,n){"use strict";n("b0c0");var e=n("2fa3");s["a"]={logIn:function(t){var s=t.account,n=t.password;return e["b"].post("/signin",{account:s,password:n})},register:function(t){var s=t.account,n=t.name,a=t.password,i=t.email,r=t.checkPassword;return e["b"].post("/users",{account:s,name:n,password:a,email:i,checkPassword:r})}}},a55b:function(t,s,n){"use strict";n.r(s);var e=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"sign-in-section"},[e("div",{staticClass:"title"},[e("img",{attrs:{src:n("ede7"),alt:""}}),e("h4",[t._v(t._s(t.isAdminLogin?"後台登入":"登入 Alphitter"))])]),e("form",{staticClass:"sign-in-form",on:{submit:function(s){return s.preventDefault(),s.stopPropagation(),t.handleSubmit.apply(null,arguments)}}},[e("div",{staticClass:"input account-input"},[e("label",{attrs:{for:"account"}},[t._v("帳號")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.account,expression:"account"}],attrs:{type:"account",id:"account"},domProps:{value:t.account},on:{input:function(s){s.target.composing||(t.account=s.target.value)}}})]),e("div",{staticClass:"input password-input"},[e("label",{attrs:{for:"password"}},[t._v("密碼")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",id:"password"},domProps:{value:t.password},on:{input:function(s){s.target.composing||(t.password=s.target.value)}}})]),e("button",{staticClass:"sign-in-button",class:{"disabled-style":t.isProcessing},attrs:{disabled:t.isProcessing,type:"submit"}},[t._v(" "+t._s(t.isProcessing?"不要一直按，會壞掉啦":"登入")+" ")]),e("div",{staticClass:"other-links"},[t.isAdminLogin?t._e():e("router-link",{attrs:{to:"/register"}},[t._v("註冊 Alphitter")]),t.isAdminLogin?t._e():e("span",{staticClass:"dot"},[t._v("．")]),e("router-link",{attrs:{to:t.isAdminLogin?"/login":"/admin/login"}},[t._v(" "+t._s(t.isAdminLogin?"前台登入":"後台登入")+" ")])],1)])])},a=[],i=n("1da1"),r=n("5530"),o=(n("96cf"),n("7696")),c=n("be6c"),u=n("2f62"),d=n("2fa3"),p={data:function(){return{account:"",password:"",isAdminLogin:"/admin/login"===this.$route.path,isProcessing:!1}},watch:{$route:function(){this.isAdminLogin="/admin/login"===this.$route.path}},computed:Object(r["a"])({},Object(u["b"])(["currentUser"])),beforeRouteLeave:function(t,s,n){this.account="",this.password="",n()},methods:{handleSubmit:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var n,e;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(s.prev=0,t.account&&t.password){s.next=3;break}return s.abrupt("return",d["a"].fire({icon:"warning",title:"請輸入帳號或密碼"}));case 3:if(t.isProcessing=!0,!t.isAdminLogin){s.next=10;break}return s.next=7,c["a"].adminLogin({account:t.account,password:t.password});case 7:s.t0=s.sent,s.next=13;break;case 10:return s.next=12,o["a"].logIn({account:t.account,password:t.password});case 12:s.t0=s.sent;case 13:if(n=s.t0,e=n.data,"success"===e.status){s.next=18;break}throw t.isProcessing=!1,new Error(e.message);case 18:d["a"].fire({icon:"success",title:"登入成功"}),t.$store.commit("setCurrentUser",e.user),localStorage.setItem("simpleTwitter-token",e.token),!1===t.isAdminLogin?t.$router.push("/"):!0===t.isAdminLogin&&t.$router.push("/admin/users"),s.next=28;break;case 24:s.prev=24,s.t1=s["catch"](0),t.isProcessing=!1,d["a"].fire({icon:"error",title:"無法登入，請稍後再試。錯誤原因：".concat(s.t1)});case 28:case"end":return s.stop()}}),s,null,[[0,24]])})))()}}},l=p,m=(n("54d0"),n("2877")),g=Object(m["a"])(l,e,a,!1,null,"6b4333f2",null);s["default"]=g.exports},a875:function(t,s,n){}}]);
//# sourceMappingURL=chunk-0d4b0345.7c3fbbf6.js.map