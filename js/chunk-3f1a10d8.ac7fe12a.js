(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3f1a10d8"],{"04d1":function(e,t,r){var s=r("342f"),n=s.match(/firefox\/(\d+)/i);e.exports=!!n&&+n[1]},"1d9d":function(e,t,r){},"25bb":function(e,t,r){"use strict";r("1d9d")},"4e82":function(e,t,r){"use strict";var s=r("23e7"),n=r("e330"),o=r("59ed"),i=r("7b0b"),a=r("07fa"),l=r("577e"),c=r("d039"),u=r("addb"),f=r("a640"),d=r("04d1"),w=r("d998"),h=r("2d00"),v=r("512c"),p=[],g=n(p.sort),m=n(p.push),b=c((function(){p.sort(void 0)})),F=c((function(){p.sort(null)})),k=f("sort"),I=!c((function(){if(h)return h<70;if(!(d&&d>3)){if(w)return!0;if(v)return v<603;var e,t,r,s,n="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:r=3;break;case 68:case 71:r=4;break;default:r=2}for(s=0;s<47;s++)p.push({k:t+s,v:r})}for(p.sort((function(e,t){return t.v-e.v})),s=0;s<p.length;s++)t=p[s].k.charAt(0),n.charAt(n.length-1)!==t&&(n+=t);return"DGBEFHACIJK"!==n}})),$=b||!F||!k||!I,x=function(e){return function(t,r){return void 0===r?-1:void 0===t?1:void 0!==e?+e(t,r)||0:l(t)>l(r)?1:-1}};s({target:"Array",proto:!0,forced:$},{sort:function(e){void 0!==e&&o(e);var t=i(this);if(I)return void 0===e?g(t):g(t,e);var r,s,n=[],l=a(t);for(s=0;s<l;s++)s in t&&m(n,t[s]);u(n,x(e)),r=n.length,s=0;while(s<r)t[s]=n[s++];while(s<l)delete t[s++];return t}})},"512c":function(e,t,r){var s=r("342f"),n=s.match(/AppleWebKit\/(\d+)\./);e.exports=!!n&&+n[1]},aa8a:function(e,t,r){"use strict";r("f6a2")},addb:function(e,t,r){var s=r("4dae"),n=Math.floor,o=function(e,t){var r=e.length,l=n(r/2);return r<8?i(e,t):a(e,o(s(e,0,l),t),o(s(e,l),t),t)},i=function(e,t){var r,s,n=e.length,o=1;while(o<n){s=o,r=e[o];while(s&&t(e[s-1],r)>0)e[s]=e[--s];s!==o++&&(e[s]=r)}return e},a=function(e,t,r,s){var n=t.length,o=r.length,i=0,a=0;while(i<n||a<o)e[i+a]=i<n&&a<o?s(t[i],r[a])<=0?t[i++]:r[a++]:i<n?t[i++]:r[a++];return e};e.exports=o},d998:function(e,t,r){var s=r("342f");e.exports=/MSIE|Trident/.test(s)},f48d:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page-container"},[r("UserSidebar",{staticClass:"user-sidebar"}),e.$route.path==="/users/"+e.userId+"/followings"?r("FollowList",{staticClass:"follow-list",attrs:{initialFollowers:e.followings,nowUser:e.user}}):e._e(),e.$route.path==="/users/"+e.userId+"/followers"?r("FollowList",{staticClass:"follow-list",attrs:{initialFollowers:e.followers,nowUser:e.user}}):e._e(),r("Trends",{staticClass:"trend-section"})],1)},n=[],o=r("2909"),i=r("1da1"),a=r("5530"),l=(r("d81d"),r("b0c0"),r("a4d3"),r("e01a"),r("4e82"),r("96cf"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"follower-main"},[r("div",{staticClass:"upper"},[r("div",{staticClass:"arrow"},[r("div",{staticClass:"icon back",on:{click:function(t){e.$router.push("/users/"+e.userId).catch((function(){}))}}})]),r("div",{staticClass:"title"},[r("h3",[e._v(e._s(e.nowUser.name))]),e.nowUser.tweets?r("span",[e._v(e._s(e.nowUser.tweets.length)+" 推文")]):e._e()])]),r("div",{staticClass:"tab self"},[r("div",{staticClass:"item",class:{active:e.$route.path==="/users/"+e.userId+"/followings"},on:{click:function(t){return e.$router.push("/users/"+e.userId+"/followings")}}},[r("div",{staticClass:"text"},[e._v("正在跟隨")])]),r("div",{staticClass:"item",class:{active:this.$route.path==="/users/"+e.userId+"/followers"},on:{click:function(t){return e.$router.push("/users/"+e.userId+"/followers")}}},[r("div",{staticClass:"text"},[e._v("追隨者")])])]),r("div",{staticClass:"followListContent"},e._l(e.followers,(function(t){return r("div",{key:t.id},[r("div",{staticClass:"singleContent"},[t?r("img",{attrs:{src:t.avatar,alt:""},on:{click:function(r){"FollowerPage"===e.$route.name?e.$router.push("/users/"+t.followerId).catch((function(){})):e.$router.push("/users/"+t.followingId).catch((function(){}))}}}):e._e(),r("div",{staticClass:"content-container",on:{click:function(r){"FollowerPage"===e.$route.name?e.$router.push("/users/"+t.followerId).catch((function(){})):e.$router.push("/users/"+t.followingId).catch((function(){}))}}},[t?r("h5",{staticClass:"title"},[e._v(" "+e._s(t.name)+" ")]):e._e(),t?r("h5",{staticClass:"account"},[e._v("＠"+e._s(t.account))]):e._e(),t?r("div",{staticClass:"content"},[e._v(" "+e._s(t.introduction)+" ")]):e._e()]),t.name!==e.currentUser.name?r("div",[r("button",{directives:[{name:"show",rawName:"v-show",value:t.isFollowed,expression:"follower.isFollowed"}],staticClass:"btn-follow unfollow",on:{click:function(r){"FollowerPage"===e.$route.name?e.deleteFollowing(t.followerId):e.deleteFollowing(t.followingId)}}},[e._v(" 正在跟隨 ")]),r("button",{directives:[{name:"show",rawName:"v-show",value:!t.isFollowed,expression:"!follower.isFollowed"}],staticClass:"btn-follow",on:{click:function(r){"FollowerPage"===e.$route.name?e.addFollowing(t.followerId):e.addFollowing(t.followingId)}}},[e._v(" 跟隨 ")])]):e._e()])])})),0)])}),c=[],u=(r("4de4"),r("d3b7"),r("2fa3")),f=r("8845"),d=r("2f62"),w={name:"FollowList",data:function(){return{followers:[],userId:""}},props:{initialFollowers:{type:Array},nowUser:{type:Object}},computed:Object(a["a"])({},Object(d["b"])(["currentUser","isAuthenticated"])),created:function(){this.userId=this.$route.params.id,this.followers=this.initialFollowers},watch:{initialFollowers:function(){this.followers=this.initialFollowers}},methods:{addFollowing:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var s,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,f["a"].addFollowing({userId:e});case 3:if(s=r.sent,n=s.data,"success"===n.status){r.next=7;break}throw new Error(n.message);case 7:"FollowerPage"===t.$route.name?t.followers.filter((function(t){t.followerId===e&&(t.isFollowed=!0)})):t.followers.filter((function(t){t.followingId===e&&(t.isFollowed=!0)})),t.$nextTick((function(){t.$bus.$emit("changeFromList")})),r.next=14;break;case 11:r.prev=11,r.t0=r["catch"](0),u["a"].fire({icon:"error",title:"無法加入追蹤，請稍後再試"});case 14:case"end":return r.stop()}}),r,null,[[0,11]])})))()},deleteFollowing:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var s,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,f["a"].deleteFollowing({userId:e});case 3:if(s=r.sent,n=s.data,"success"===n.status){r.next=7;break}throw new Error(n.message);case 7:"FollowerPage"===t.$route.name?t.followers.filter((function(t){t.followerId===e&&(t.isFollowed=!1)})):t.followers.filter((function(t){t.followingId===e&&(t.isFollowed=!1)})),t.$nextTick((function(){t.$bus.$emit("changeFromList")})),r.next=14;break;case 11:r.prev=11,r.t0=r["catch"](0),u["a"].fire({icon:"error",title:"無法取消追蹤，請稍後再試"});case 14:case"end":return r.stop()}}),r,null,[[0,11]])})))()}}},h=w,v=(r("25bb"),r("2877")),p=Object(v["a"])(h,l,c,!1,null,null,null),g=p.exports,m=r("a004"),b=r("2fb4"),F=r("4cce"),k={name:"FollowingPage",components:{UserSidebar:m["a"],Trends:b["a"],FollowList:g},data:function(){return{followers:[],followings:[],user:{},userId:"",topUsers:[]}},computed:Object(a["a"])({},Object(d["b"])(["currentUser","isAuthenticated"])),created:function(){var e=this;this.$bus.$on("changeFromTrends",(function(){console.log("test bus on catch event"),e.fetchFollowList()})),this.userId=this.$route.params.id,this.fetchFollowList(this.userId),this.fetchProfile(this.userId),this.fetchUserTweets(this.userId)},beforeDestroy:function(){this.$bus.$off("changeFromTrends")},methods:{fetchProfile:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,F["a"].getProfile({userId:e});case 3:s=r.sent,t.user=Object(a["a"])({},s.data),r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](0),u["a"].fire({icon:"error",title:"無法處理請求，請稍後再試 \n 錯誤原因：".concat(r.t0)});case 10:case"end":return r.stop()}}),r,null,[[0,7]])})))()},fetchUserTweets:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,F["a"].getUserTweets({userId:e});case 3:s=r.sent,t.user.tweets=s.data,t.user.tweets=t.user.tweets.map((function(e){return{id:e.User.id,UserId:e.UserId,name:e.User.name,avatar:e.User.avatar,account:e.User.account,createdAt:e.createdAt,description:e.description,likeTweetCount:e.Like?e.Like.length:0,replyTweetCount:e.Replies?e.Replies.length:0,isLiked:!e.isLiked||e.isLiked}})),r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](0),u["a"].fire({icon:"error",title:"無法處理請求，請稍後再試 \n 錯誤原因：".concat(r.t0)});case 11:case"end":return r.stop()}}),r,null,[[0,8]])})))()},fetchFollowList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r="/users"===e.$route.path?e.currentUser.id:e.$route.params.id,t.prev=1,t.next=4,F["a"].getFollowers({userId:r});case 4:return s=t.sent,e.followers=s.data,e.followers.sort((function(e,t){return e.createdAt<t.createdAt?1:-1})),t.next=9,F["a"].getFollowings({userId:r});case 9:n=t.sent,e.followings=Object(o["a"])(n.data),e.followings.sort((function(e,t){return e.createdAt<t.createdAt?1:-1})),t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](1),u["a"].fire({icon:"error",title:"無法處理請求，請稍後再試 \n 錯誤原因：".concat(t.t0)});case 17:case"end":return t.stop()}}),t,null,[[1,14]])})))()}}},I=k,$=(r("aa8a"),Object(v["a"])(I,s,n,!1,null,"57f155ee",null));t["default"]=$.exports},f6a2:function(e,t,r){}}]);
//# sourceMappingURL=chunk-3f1a10d8.ac7fe12a.js.map